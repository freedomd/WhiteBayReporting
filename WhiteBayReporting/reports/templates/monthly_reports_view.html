{% extends "base.html" %}
{% load humanize %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
	<script type="text/javascript">
		$(document).ready(function () {
  			$("#tabs").find('li').removeClass("active");
			$("#report_tab").addClass("active");
		});
	</script>
</head>

<body>

{% if year_error %}
	<div class="container" id="error_message">{{ error_message }}</div>
{% else %}

<div class="container">
	<div style="float:right">
		<div class="pagination-small">
 			<ul>
 			{% if prevYear %}
 			<li class="active"><a href="#">{{ prevYear }}</a></li>
 			{% endif %}
    		<li class="disabled"><a href="#">{{ year }}</a></li>
    		{% if nextYear %}
    		<li class="active"><a href="#">{{ nextYear }}</a></li>
    		{% endif %}
  			</ul>
		</div>
	</div>
	<div style="clear:both;"></div> 
</div>

<!-- reports list  -->
<div class="hero-unit" style="background-color: #FFFFFF;padding:20px;">

<div id="reports_container" class="container data_container">
	<table class="table table-striped table-bordered data_table" style="margin-bottom:30px;">
		<tr>
		<th>Month</th>
		<th>Gross PNL</th>
		<th>Unrealized PNL</th>
		<th>Fees</th>
		<th>Net PNL</th>
		<!-- <th>LMV</th>
		<th>SMV</th> -->
		</tr>
	{% for report in monthly_report_list %}
		<tr>
		<td><a href="/monthlyReport/{{ report.reportDate.year }}/{{ report.reportDate.month }}/">{{ report.reportDate|date:'F' }}</a></td>
		
		{% if report.grossPNL < 0 %}
		<td><span class="negative_data">{{ report.grossPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.grossPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		{% if report.unrealizedPNL < 0 %}
		<td><span class="negative_data">{{ report.unrealizedPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.unrealizedPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		<td>{{ report.fees|floatformat:2|intcomma }}</td>
		
		{% if report.netPNL < 0 %}
		<td><span class="negative_data">{{ report.netPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.netPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		<!-- <td>{{ report.LMV|floatformat:2|intcomma }}</td>
		<td>{{ report.SMV|floatformat:2|intcomma }}</td> -->
		</tr>
	{% endfor %}
	</table>
	
	{% if month_error %}
		<div class="container" id="error_message">{{ error_message }}</div>
	{% else %}
	<table class="table table-striped table-bordered data_table">
		<tr>
		<th>Date</th>
		<th>SOD</th>
		<th>Buys</th>
		<th>Sells</th>
		<th>Gross PNL</th>
		<th>Unrealized PNL</th>
		<th>Fees</th>
		<th>Net PNL</th>
		<th>LMV</th>
		<th>SMV</th>
		<th>EOD</th>
		</tr>
	{% for report in report_list %}
		<tr>
		<td><a href="/dailyReport/{{ report.reportDate.year }}/{{ report.reportDate.month }}/{{ report.reportDate.day }}/">{{ report.reportDate|date:'m-d' }}</a></td>
		<td>{{ report.SOD|intcomma }}</td>
		<td>{{ report.buys|intcomma }}</td>
		<td>{{ report.sells|intcomma }}</td>
		
		{% if report.grossPNL < 0 %}
		<td><span class="negative_data">{{ report.grossPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.grossPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		{% if report.unrealizedPNL < 0 %}
		<td><span class="negative_data">{{ report.unrealizedPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.unrealizedPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		<td>{{ report.fees|floatformat:2|intcomma }}</td>
		
		{% if report.netPNL < 0 %}
		<td><span class="negative_data">{{ report.netPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.netPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		<td>{{ report.LMV|floatformat:2|intcomma }}</td>
		<td>{{ report.SMV|floatformat:2|intcomma }}</td>
		<td>{{ report.EOD|intcomma }}</td>
		</tr>
	{% endfor %}
		<tr>
		<th>Total</th>
		<th>-</th>
		<th>{{ total.buys|intcomma }}</th>
		<th>{{ total.sells|intcomma }}</th>
		
		{% if total.grossPNL < 0 %}
		<th><span class="negative_data">{{ total.grossPNL|floatformat:2|intcomma }}</span></th>
		{% else %}
		<th><span class="positive_data">{{ total.grossPNL|floatformat:2|intcomma }}</span></th>
		{% endif %}
		
		{% if total.unrealizedPNL < 0 %}
		<th><span class="negative_data">{{ total.unrealizedPNL|floatformat:2|intcomma }}</span></th>
		{% else %}
		<th><span class="positive_data">{{ total.unrealizedPNL|floatformat:2|intcomma }}</span></th>
		{% endif %}
		
		<th>{{ total.fees|floatformat:2|intcomma }}</th>
		
		{% if total.netPNL < 0 %}
		<th><span class="negative_data">{{ total.netPNL|floatformat:2|intcomma }}</span></th>
		{% else %}
		<th><span class="positive_data">{{ total.netPNL|floatformat:2|intcomma }}</span></th>
		{% endif %}
		
		<th>-</th>
		<th>-</th>
		<th>-</th>
		</tr>
	</table>
	{% endif %}
</div>
</div>
{% endif %}

</body>
</html>

{% endblock %}