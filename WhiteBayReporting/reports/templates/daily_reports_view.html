{% extends "base.html" %}
{% load humanize %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
	<script type="text/javascript">
		function setActive(){
			$("#tabs").find('li').removeClass("active")
			$("#report_tab").addClass("active")
		}
	</script>
</head>

<body onload=setActive()>

{% if error %}
	<div class="container" id="error_message">{{ error_message }}</div>
{% else %}
<div class="container">
<div style="float:right">
	Last Update: {{ report_date|date:'Y-m-d' }}
</div>
<div style="clear:both;"></div> 
</div>

<!-- reports list  -->
<div class="hero-unit" style="background-color: #FFFFFF;padding: 20px;">
<div id="reports_container" class="container data_container">
	<table class="table table-striped table-bordered data_table">
		<tr>
		<th><a class="tab" href="/dailyReport/symbol/{{ SY }}/{{ year }}/{{ month }}/{{ day }}/1/">Symbol</a></th>
		<th><a class="tab" href="/dailyReport/SOD/{{ SO }}/{{ year }}/{{ month }}/{{ day }}/1/">SOD</a></th>
		<th><a class="tab" href="/dailyReport/mark/{{ MA }}/{{ year }}/{{ month }}/{{ day }}/1/">Mark</a></th>
		<th><a class="tab" href="/dailyReport/buys/{{ BS }}/{{ year }}/{{ month }}/{{ day }}/1/">Buys</a></th>
		<th><a class="tab" href="/dailyReport/buyAve/{{ BA }}/{{ year }}/{{ month }}/{{ day }}/1/">Buy Ave</a></th>
		<th><a class="tab" href="/dailyReport/sells/{{ SS }}/{{ year }}/{{ month }}/{{ day }}/1/">Sells</a></th>
		<th><a class="tab" href="/dailyReport/sellAve/{{ SA }}/{{ year }}/{{ month }}/{{ day }}/1/">Sell Ave</a></th>
		<th><a class="tab" href="/dailyReport/grossPNL/{{ GP }}/{{ year }}/{{ month }}/{{ day }}/1/">Gross PNL</a></th>
		<th><a class="tab" href="/dailyReport/unrealizedPNL/{{ UP }}/{{ year }}/{{ month }}/{{ day }}/1/">Unrealized PNL</a></th>
		<th><a class="tab" href="/dailyReport/fees/{{ FS }}/{{ year }}/{{ month }}/{{ day }}/1/">Fees</a></th>
		<th><a class="tab" href="/dailyReport/netPNL/{{ NP }}/{{ year }}/{{ month }}/{{ day }}/1/">Net PNL</a></th>
		<th><a class="tab" href="/dailyReport/LMV/{{ LM }}/{{ year }}/{{ month }}/{{ day }}/1/">LMV</a></th>
		<th><a class="tab" href="/dailyReport/SMV/{{ SM }}/{{ year }}/{{ month }}/{{ day }}/1/">SMV</a></th>
		<th><a class="tab" href="/dailyReport/EOD/{{ EO }}/{{ year }}/{{ month }}/{{ day }}/1/">EOD</a></th>
		<th><a class="tab" href="/dailyReport/closing/{{ CL }}/{{ year }}/{{ month }}/{{ day }}/1/">Closing</a></th>
		</tr>
	{% for report in report_list %}
		<tr>
		<td><a href="/symbol/{{ report.symbol }}/{{ report.reportDate.year }}/{{ report.reportDate.month }}/{{ report.reportDate.day }}/1/">{{ report.symbol }}</td>
		<td>{{ report.SOD|intcomma }}</td>
		<td>{{ report.mark }}</td>
		<td>{{ report.buys|intcomma }}</td>
		<td>{{ report.buyAve|floatformat:2|intcomma }}</td>
		<td>{{ report.sells|intcomma }}</td>
		<td>{{ report.sellAve|floatformat:2|intcomma }}</td>
		
		{% if report.grossPNL < 0 %}
		<td><span class="negative_data">{{ report.grossPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.grossPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		{% if report.unrealizedPNL < 0 %}
		<td><span class="negative_data">{{ report.unrealizedPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.unrealizedPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		<td>{{ report.fees|floatformat:2|intcomma }}</td>
		
		{% if report.netPNL < 0 %}
		<td><span class="negative_data">{{ report.netPNL|floatformat:2|intcomma }}</span></td>
		{% else %}
		<td><span class="positive_data">{{ report.netPNL|floatformat:2|intcomma }}</span></td>
		{% endif %}
		
		<td>{{ report.LMV|floatformat:2|intcomma }}</td>
		<td>{{ report.SMV|floatformat:2|intcomma }}</td>
		<td>{{ report.EOD|intcomma }}</td>
		<td>{{ report.closing|floatformat:2|intcomma }}</td>
		</tr>
	{% endfor %}
		<!-- 
		<tr>
		<th>Total</th>
		<th>{{ total.SOD|intcomma }}</th>
		<th>-</th>
		<th>{{ total.buys|intcomma }}</th>
		<th>-</th>
		<th>{{ total.sells|intcomma }}</th>
		<th>-</th>
		
		{% if total.grossPNL < 0 %}
		<th><span class="negative_data">{{ total.grossPNL|floatformat:2|intcomma }}</span></th>
		{% else %}
		<th><span class="positive_data">{{ total.grossPNL|floatformat:2|intcomma }}</span></th>
		{% endif %}
		
		{% if total.unrealizedPNL < 0 %}
		<th><span class="negative_data">{{ total.unrealizedPNL|floatformat:2|intcomma }}</span></th>
		{% else %}
		<th><span class="positive_data">{{ total.unrealizedPNL|floatformat:2|intcomma }}</span></th>
		{% endif %}
		
		<th>{{ total.fees|floatformat:2|intcomma }}</th>
		
		{% if total.netPNL < 0 %}
		<th><span class="negative_data">{{ total.netPNL|floatformat:2|intcomma }}</span></th>
		{% else %}
		<th><span class="positive_data">{{ total.netPNL|floatformat:2|intcomma }}</span></th>
		{% endif %}
		
		<th>{{ total.LMV|floatformat:2|intcomma }}</th>
		<th>{{ total.SMV|floatformat:2|intcomma }}</th>
		<th>{{ total.EOD|intcomma }}</th>
		<th>-</th>
		</tr>
		-->
	</table>
	<div class="paginator">
		{% if previousPage %}
		<a href="/dailyReport/{{ tab }}/{{ order }}/{{ year }}/{{ month }}/{{ day }}/{{ pp }}/">Previous</a>
		{% endif %}
		{% if previousPage and nextPage %} 
		|
		{% endif %}
		{% if nextPage %}
		<a href="/dailyReport/{{ tab }}/{{ order }}/{{ year }}/{{ month }}/{{ day }}/{{ np }}/">Next</a>
		{% endif %}
	</div>
	<div style="clear:both;"></div> 
</div>
</div>

{% endif %}

</body>
</html>

{% endblock %}